{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "title": "Schema for bibliographic records",
    "type": "object",
    "properties": {
        "$schema": {
            "title": "Schema",
            "description": "Schema to validate book records against.",
            "type": "string",
            "minLength": 7
        },
        "bibid": {
            "title": "Bibid",
            "description": "rero21 persistent identifiers for bibliographic records.",
            "type": "string",
            "minLength": 1
        },
        "title": {
            "title": "Title",
            "description": "Required. Entire title without statement of responsibility.",
            "type": "string",
            "minLength": 1
        },
        "titlesProper": {
            "title": "Proper or uniformed title",
            "description": "Uniform title, a related or an analytical title that is controlled by an authority file or list, used as an added entry.",
            "type": "array",
            "items": {
                "type": "string",
                "minLength": 1
            },
            "minItems": 1
        },
        "languages": {
            "title": "Languages",
            "description": "List of languages for the bibliographic record.",
            "type": "array",
            "uniqueItems": true,
            "minItems": 1,
            "items": {
                "type": "object",
                "properties": {
                    "language": {
                        "title" : "Language",
                        "description": "Required. Language of the bibliographic record, primary or not.",
                        "type": "string",
                        "enum": [
                            "fre",
                            "ger",
                            "eng",
                            "ita",
                            "spa",
                            "ara",
                            "chi",
                            "lat",
                            "heb",
                            "jpn",
                            "por",
                            "rus"
                        ]
                    }
                }
            },
            "required": [ "language" ]
        },
        "translatedFrom": {
            "title": "Translated from",
            "description": "Language from which a bibliographic record is translated.",
            "type": "array",
            "items": {
                "type": "string",
                "minLength": 2,
                "validationMessage": "Should be in the ISO 639 format, with 3 characters, ie <code>eng</code> for English."
            },
            "minItems": 1
        },
        "authors": {
            "title": "Authors",
            "description": "Author(s) of the bibliographic record. Can be either persons or organisations.",
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": {
                        "title": "Name",
                        "description": "Person's or organisation's name.",
                        "type": "string"
                    },
                    "type": {
                        "title": "Type",
                        "description": "Identify if the author is a person or an organisation.",
                        "type": "string",
                        "enum": [
                            "person",
                            "organisation"
                        ],
                        "default": "person"
                    },
                    "date": {
                        "title": "Date",
                        "description": "Information about the birth and the death of a person. Helpful to disambiguate people.",
                        "type": "string"
                    },
                    "qualifier": {
                        "title": "Qualifier",
                        "description": "Information about the person, ie her profession. Helpful to disambiguate people.",
                        "type": "string"
                    }
                }
            },
            "required": [ "name", "type" ],
            "additionalProperties": false,
            "minItems": 1
        },
        "publishers": {
            "title": "Publishers",
            "description": "Publisher(s) of the bibliographic record.",
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": {
                        "title": "Name",
                        "description": "Publisher's name.",
                        "type": "array",
                        "items": {
                            "type": "string",
                            "minLength": 2
                        },
                        "additionalProperties": false,
                        "minItems": 1
                    },
                    "place": {
                        "title": "Place of publication",
                        "description": "Publisher's place of publication.",
                        "type": "array",
                        "items": {
                            "type": "string",
                            "minLength": 2
                        },
                        "additionalProperties": false,
                        "minItems": 1
                    }
                }
            },
            "additionalProperties": false,
            "minItems": 1
        },
        "publicationYear": {
            "title": "Publication's Year",
            "description": "Year of the publication. This must be an integer, ie 1989, 453, -50. Used to sort search results. Once this field is set, a free formed date of publication can be added in the next field.",
            "type": "integer",
            "minimum": -9999,
            "maximum": 2050,
            "validationMessage": "Have to be an integer, from -9999 to +9999. Zero prefixes aren't needed."
        },
        "freeFormedPublicationDate": {
            "title": "Date of publication (free formed)",
            "description": "Date of the publication in a free form. If there's a normalized date of publication, then a free formed date can be added to be displayed.",
            "type": "string",
            "minLength": 3
        },
        "extent": {
            "title": "Extent",
            "description": "Extent of the bibliographic record, ie number of pages or volumes.",
            "type": "string",
            "minLength": 1
        },
        "otherMaterialCharacteristics": {
            "title": "Other Material Characteristics",
            "description": "Other Material Characteristics, ie illustrations, black and with or coloured.",
            "type": "string",
            "minLength": 1
        },
        "formats": {
            "title": "Format",
            "description": "Format of the record, ie dimensions in cm.",
            "type": "array",
            "items": {
                "type": "string",
                "minLength": 1
            },
            "additionalProperties": false,
            "minItems": 1
        },
        "additionalMaterials": {
            "title": "Additional materials",
            "description": "Accompagnying material of the bibliographic record, ie maps.",
            "type": "string",
            "minLength": 1
        },
        "series": {
            "title": "Series",
            "description": "Series to which belongs the record.",
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": {
                        "title": "Title",
                        "description": "Title of the serie.",
                        "type": "string"
                    },
                    "number": {
                        "title": "Number",
                        "description": "Number of the bibliographic record in the serie.",
                        "type": "string"
                    }
                }
            },
            "required": ["name"],
            "additionalProperties": false,
            "minItems": 1
        },
        "notes": {
            "title": "Note",
            "description": "Note on the record.",
            "type": "array",
            "items": {
                "type": "string",
                "minLength": 1
            },
            "additionalProperties": false,
            "minItems": 1
        },
        "abstracts": {
            "title": "Abstract",
            "description": "Abstract of the record.",
            "type": "array",
            "items": {
                "type": "string",
                "minLength": 3
            },
            "additionalProperties": false,
            "minItems": 1
        },
        "identifiers": {
            "title": "Identifiers",
            "description": "Persistent identifiers of the record, ie reroID and ISBN.",
            "type": "object",
            "properties": {
                "reroID": {
                    "title": "reroID",
                    "description": "Corresponding reroID of the original RERO record.",
                    "type": "string",
                    "minLength": 1
                },
                "isbn": {
                    "title": "ISBN",
                    "description": "ISBN of the record.",
                    "type": "string",
                    "pattern": "^978[0-9]{10}$",
                    "validationMessage": "Should be a valid ISBN-13 without dashes."
                }
            },
            "additionalProperties": false
        },
        "subjects": {
            "title": "Subject",
            "description": "Subject of the record.",
            "type": "array",
            "items": {
                "type": "string",
                "minLength": 1
            },
            "additionalProperties": false,
            "minItems": 1
        }
    },
    "additionalProperties": false,
    "required": [ "$schema", "bibid", "title", "languages" ]
}
